{% extends "spamConso/layout.html" %}
{% load staticfiles %}

<!-- page head title -->
{% block base_title %}Ma Page | {{ block.super }}{% endblock %}

<!-- Page content header title -->
{% block base_content_header_title %}Titre de ma page{% endblock %}

<!-- Page content header optional description -->
{% block base_content_header_title_description %}Description de ma page{% endblock %}

<!-- Page content breadcrumb (fil d'arianne) -->
<!-- le breadcrumb peut aller jusqu'a une profondeur de 4 (previous4) -->

{% block page_header_addons %}
{% endblock %}

{% block page_footer_addons %}
    <script>
    var mois = ['Janvier', 'Fevrier', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Aout', 'Septembre', 'Octobre', 'Novembre', 'Decembre']
        var dataBiere = {
            labels: [{% for user in user_biere_list %}"{{ user.username }}", {% endfor %}],
            datasets: [
                {
                    label: "Biere dataset",
                    fillColor: "rgba(220,220,220,0.5)",
                    strokeColor: "rgba(220,220,220,0.8)",
                    highlightFill: "rgba(220,220,220,0.75)",
                    highlightStroke: "rgba(220,220,220,1)",
                    data: [{% for user in user_biere_list %}{{ user.total }}, {% endfor %}]
                }
            ]
        };
        var dataChouffe = {
            labels: [{% for user in chouffe_list %}"{{ user.username }}", {% endfor %}],
            datasets: [
                {
                    label: "Chouffe dataset",
                    fillColor: "rgba(220,220,220,0.5)",
                    strokeColor: "rgba(220,220,220,0.8)",
                    highlightFill: "rgba(220,220,220,0.75)",
                    highlightStroke: "rgba(220,220,220,1)",
                    data: [{% for user in chouffe_list %}{{ user.total }}, {% endfor %}]
                }
            ]
        };
        var dataBPM = {
            labels: [{% for user in bpm %}mois[Math.floor({{ user.month }}) - 1 ], {% endfor %}],
            datasets: [
                {
                    label: "Biere per month dataset",
                    fillColor: "rgba(220,220,220,0.5)",
                    strokeColor: "rgba(220,220,220,0.8)",
                    highlightFill: "rgba(220,220,220,0.75)",
                    highlightStroke: "rgba(220,220,220,1)",
                    data: [{% for user in bpm %}{{ user.total }}, {% endfor %}]
                }
            ]
        };

        $(function () {
            var ctx1 = document.getElementById("biereChart").getContext("2d");
            var biereChart = new Chart(ctx1).Bar(dataBiere);
            var ctx2 = document.getElementById("chouffeChart").getContext("2d");
            var chouffeChart = new Chart(ctx2).Bar(dataChouffe);
            var ctx3 = document.getElementById("bpmChart").getContext("2d");
            var bpmChart = new Chart(ctx3).Bar(dataBPM);

        });
    </script>

{% endblock %}

{% block body %}
    <canvas id='bpmChart' width="400" height="400"></canvas>
    <canvas id='biereChart' width="400" height="400"></canvas>
    <canvas id='chouffeChart' width="400" height="400"></canvas>

{% endblock %}
